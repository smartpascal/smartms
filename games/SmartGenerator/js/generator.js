(function(g){var l=g.prototype,p=l.parseFromString;try{if((new g).parseFromString("","text/html"))return}catch(f){}l.parseFromString=function(f,l){if(/^\s*text\/html\s*(?:;|$)/i.test(l)){var h=document.implementation.createHTMLDocument("");-1<f.toLowerCase().indexOf("<!doctype")?h.documentElement.innerHTML=f:h.body.innerHTML=f;return h}return p.apply(this,arguments)}})(DOMParser);
var html2dom=function(){function g(b){if("function"==typeof DOMParser)b=(new DOMParser).parseFromString(b,"text/html");else throw Error("Your JS environment doesn't come with either of the supported parsers (document.createDocumentFragment or DOMParser)");e="";h={};b=b.body;for(var d=document.createNodeIterator(b,NodeFilter.SHOW_ALL,null,!1),a;a=d.nextNode();){var c=a+", name: "+a.nodeName+", type: "+a.nodeType;null!=a.nodeValue&&(c+=", value:"+f(a.nodeValue));if(a==b){if(0!=e.indexOf("docFragment")){e+=
"var docFragment := JDocumentFragment( document.createDocumentFragment() ); // contains all gathered nodes\n";Object.defineProperty(a,"h2d_nodeID",{configurable:!0,writable:!0});a.h2d_nodeID="docFragment";continue}}else var n=a.parentNode.h2d_nodeID;if(a.nodeType==Node.ELEMENT_NODE){var c=a,k=a.nodeName;"h2d_nodeID"in c||l(c);"SCRIPT"==k&&(e+="//XXX CSP will forbid inline JavaScript!\n");var m=c.toString().match(/\[string (.*?)\]/);e+="\nvar "+c.h2d_nodeID+" := "+("J"+(m?m[1]:c.constructor.name))+
"( document.createElement('"+k+"') );\n";for(c=0;c<a.attributes.length;c++){var k=a,m=a.attributes[c].name,g=a.attributes[c].value;0==m.indexOf("on")&&(e+="//XXX CSP will forbid inline JavaScript and event handlers. Use addEventHandler instead!\n");"style"==m&&(e+="//XXX CSP will forbid inline styles. Use ``"+k.h2d_nodeID+".style'' instead of setAttribute.\n");"src"!=m&&"href"!=m&&(g=p(g));e+=k.h2d_nodeID+".setAttribute("+f(m)+", "+f(g)+");\n"}void 0!=n&&q(n,a)}else a.nodeType==Node.TEXT_NODE?/\S/.test(a.textContent)&&
(k=a.textContent.replace(/\s+/," "),c=a,"h2d_nodeID"in c||l(c),e+="var "+c.h2d_nodeID+" := JText( document.createTextNode("+f(k)+") );\n",void 0!=n&&q(n,a)):a.nodeType==Node.COMMENT_NODE?(c=a,k=a.nodeValue,"h2d_nodeID"in c||l(c),e+="var "+c.h2d_nodeID+" := JComment( document.createComment("+f(k)+") );\n",void 0!=n&&q(n,a)):console.log("Unknown Node Type: "+c)}return e}function l(b){var d=b.nodeName.replace(/[^a-zA-Z0-9]/g,"");b.nodeType==Node.ELEMENT_NODE&&b.hasAttribute("id")&&(d=b.id.replace(/[^a-zA-Z0-9]/g,
""));d=d.toLowerCase();Object.defineProperty(b,"h2d_nodeID",{configurable:!0,writable:!0});if(d in h){var a=h[d].length-1;h[d].push(d+"_"+a);b.h2d_nodeID=d+"_"+a}else h[d]=[d],b.h2d_nodeID=d+"_"}function p(b){return b.replace(/[<>&'"\/]/gi,function(b){return"&#x"+b.charCodeAt(0).toString(16)+";"})}function f(b){b="undefined"!=typeof JSON?JSON.stringify(b):b.toSource().match(/\(new String\((.+)\)\)/)[1];return b=b.replace(/\$\$([^"$]+)\$\$/g,'"+ $1 +"')}function q(b,d){e+=b+".appendChild("+d.h2d_nodeID+
");\n"}var h={},e="";return{parse:g,html2dom:g,strToSrc:f,dom2html:function(b,d,a){var c=document.getElementById("iframe");null==c&&a('This function requires this iframe attribute in the DOM: iframe id="iframe" src="data:text/html;charset=utf-8,<div id=\'container\'></div>" sandbox="allow-same-origin"></iframe>');c.onload=function(){this.contentWindow.eval(b);this.contentWindow.container.appendChild(this.contentWindow.docFragment);"function"==typeof d&&d(this.contentWindow.container.innerHTML)};c.onerror=
function(b){"function"==typeof a&&a(b)};c.src="data:text/html;charset=utf-8,<div id='container'></div>"}}}();